# vim:fileencoding=utf-8:foldmethod=marker
#
#  _    _ _   _           _                      _             _
# | | _(_) |_| |_ _   _  | |_ ___ _ __ _ __ ___ (_)_ __   __ _| |
# | |/ / | __| __| | | | | __/ _ \ '__| '_ ` _ \| | '_ \ / _` | |
# |   <| | |_| |_| |_| | | ||  __/ |  | | | | | | | | | | (_| | |
# |_|\_\_|\__|\__|\__, |  \__\___|_|  |_| |_| |_|_|_| |_|\__,_|_|
#                 |___/              _          _   _
#   ___ _   _ ___| |_ ___  _ __ ___ (_)______ _| |_(_) ___  _ __
#  / __| | | / __| __/ _ \| '_ ` _ \| |_  / _` | __| |/ _ \| '_ \
# | (__| |_| \__ \ || (_) | | | | | | |/ / (_| | |_| | (_) | | | |
#  \___|\__,_|___/\__\___/|_| |_| |_|_/___\__,_|\__|_|\___/|_| |_|

##########################################################################

# themes
#include GruvBox_DarkHard.conf
#include Wryan.conf
#include VSCode_Dark.conf

# terminal opacity and blur
# background_opacity 1.0
# background_blur 1

cursor_shape block
shell_integration no-cursor

cursor_shape_unfocused hollow
cursor_blink_interval 0.5 ease-in-out
cursor_trail 5
cursor_stop_blinking_after 15.0
enable_audio_bell no
window_alert_on_bell no
bell_on_tab "ðŸ”” "
tab_bar_style powerline
dynamic_background_opacity yes
background_opacity 0.925
linux_display_server auto

# BEGIN_KITTY_THEME
# Catppuccin-Mocha
include current-theme.conf
# END_KITTY_THEME

# BEGIN_KITTY_FONTS
#font_family      family="Maple Mono NF"
font_family family="Monaspace Krypton" features="cv01=2"
bold_font        auto
italic_font      family="Monaspace Radon" features="cv01=2"
bold_italic_font family="Monaspace Radon" style="ExtraBold" features="cv01=2"
# END_KITTY_FONTS

# advance
wayland_titlebar_color background
term xterm-kitty

# terminal bell
enable_audio_bell no

# os specific tweaks (Gnome window decoration for wayland)
# linux_display_server x11

# font size management
map kitty_mod+backspace change_font_size all 0

# cursor customization
# block / beam / underline
cursor_shape block
cursor_blink_interval 0
cursor_stop_blinking_after 0
shell_integration no-cursor

# scrollback
scrollback_lines 5000
wheel_scroll_multiplier 3.0

# mouse
mouse_hide_wait -1

# window layout
remember_window_size  no
initial_window_width  1200
initial_window_height 750
window_border_width 0.5pt
# enabled_layouts tall
# enabled_layouts vertical,stack,grid,splits
window_padding_width 0
window_margin_width 0
hide_window_decorations no

# window management
map kitty_mod+enter new_window
map kitty_mod+] next_window
map kitty_mod+[ previous_window

# layout management
map kitty_mod+l next_layout
map ctrl+alt+r goto_layout tall
map ctrl+alt+s goto_layout stack
map ctrl+alt+l goto_layout splits
map ctrl+alt+f goto_layout fat

# tab bar customization
# tab_bar_style powerline
# tab_powerline_style slanted
# tab_bar_style fade
# tab_bar_edge bottom
# tab_bar_align left
active_tab_font_style   bold-italic
inactive_tab_font_style normal

inactive_text_alpha 0.7

# Tab bar
tab_bar_edge bottom
tab_bar_margin_width 0.0
tab_bar_margin_height 0.0 0.0
tab_bar_style custom
tab_bar_align left
tab_bar_min_tabs 1
tab_separator ""
# tab_activity_sybol none
# tab_title_template "{index} î‚± {title}"
# tab_title_template "{f'{title[:30]}â€¦' if title.rindex(title[-1]) + 1 > 30 else (title.center(6) if (title.rindex(title[-1]) + 1) % 2 == 0 else title.center(5))}"
#{tab.active_wd.rsplit('/', 1)[-1]}"
tab_title_template "{index} î‚¹ {title}"
tab_title_max_length 30

map kitty_mod+f5 load_config_file
map ctrl+w>ctrl+r load_config_file

# tab management
map kitty_mod+t new_tab
map ctrl+alt+right next_tab
map ctrl+alt+left previous_tab
map kitty_mod+q close_tab

# Create a new window splitting the space used by the existing one so that
# the two windows are placed one above the other
map ctrl+w>s launch --location=hsplit

# Create a new window splitting the space used by the existing one so that
# the two windows are placed side by side
map ctrl+w>shift+s launch --location=vsplit

# Create a new window splitting the space used by the existing one so that
# the two windows are placed side by side if the existing window is wide or
# one above the other if the existing window is tall.
map ctrl+w>n launch --location=split

# Rotate the current split, changing its split axis from vertical to
# horizontal or vice versa
map ctrl+w>r layout_action rotate

# Move the active window in the indicated direction
map ctrl+w>shift+up move_window up
map ctrl+w>shift+left move_window left
map ctrl+w>shift+right move_window right
map ctrl+w>shift+down move_window down

# Move the active window to the indicated screen edge
map ctrl+w>kitty_mod+up layout_action move_to_screen_edge top
map ctrl+w>kitty_mod+left layout_action move_to_screen_edge left
map ctrl+w>kitty_mod+right layout_action move_to_screen_edge right
map ctrl+w>kitty_mod+down layout_action move_to_screen_edge bottom
map ctrl+w>kitty_mod+h layout_action move_to_screen_edge left
map ctrl+w>kitty_mod+l layout_action move_to_screen_edge right
map ctrl+w>kitty_mod+j layout_action move_to_screen_edge bottom
map ctrl+w>kitty_mod+k layout_action move_to_screen_edge top
#
# Switch focus to the neighboring window in the indicated direction
map ctrl+w>left neighboring_window left
map ctrl+w>right neighboring_window right
map ctrl+w>up neighboring_window up
map ctrl+w>down neighboring_window down
map ctrl+w>h neighboring_window left
map ctrl+w>l neighboring_window right
map ctrl+w>j neighboring_window down
map ctrl+w>k neighboring_window up

# Set the bias of the split containing the currently focused window. The
# currently focused window will take up the specified percent of its parent
# window's size.
map ctrl+w>, layout_action bias 60

# resizing windows
map ctrl+w>alt+left resize_window narrower
map ctrl+w>alt+right resize_window wider
map ctrl+w>alt+up resize_window taller
map ctrl+w>alt+down resize_window shorter 3
# reset all windows in the tab to default sizes
map ctrl+w>home resize_window reset

map kitty_mod+f1 launch --type=overlay bash -i -c 'rg "^\s*(map|mouse_map)\s+.*" ~/.config/kitty/kitty.conf | fzf'
